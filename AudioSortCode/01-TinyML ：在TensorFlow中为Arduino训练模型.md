ğŸ“Œ åŸæ–‡é“¾æ¥ï¼š[Intro to TinyML Part 1: Training a Model for Arduino in TensorFlow (digikey.com)](https://www.digikey.com/en/maker/projects/intro-to-tinyml-part-1-training-a-model-for-arduino-in-tensorflow/8f1fc8c0b83d417ab521c48864d2a8ec)

è§†é¢‘æ•™ç¨‹ï¼š[(629) Intro to TinyML Part 1: Training a Neural Network for Arduino in TensorFlow | Digi-Key Electronics - YouTube](https://www.youtube.com/watch?v=BzzqYNYOcWc)

 2020-04-06 | ä½œè€…ï¼š[ShawnHymel](https://www.digikey.com/en/maker/profiles/72825bdd887a427eaf8d960b6505adac)

å½“æˆ‘ä»¬å¤§å¤šæ•°äººæƒ³åˆ°[[AI|äººå·¥æ™ºèƒ½]]ï¼ˆ[[AI]]ï¼Œ[[AI|Artificial Intelligence]]ï¼‰å’Œ[[ML|æœºå™¨å­¦ä¹ ]]ï¼ˆ[[ML]]ï¼Œ[[ML|Machine Learning]]ï¼‰æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæƒ³åˆ°å®¶ç”¨åŠ©æ‰‹ã€è‡ªåŠ¨æœºå™¨äººå’Œè‡ªåŠ¨é©¾é©¶æ±½è½¦ã€‚ç„¶è€Œï¼Œ[[ML|æœºå™¨å­¦ä¹ ]]çš„ä¸–ç•Œè¿œä¸æ­¢è¿™äº›ã€‚æ¯å½“æˆ‘ä»¬è®­ç»ƒæ•°å­¦æ¨¡å‹æ¥å¸®åŠ©è®¡ç®—æœºåœ¨æ²¡æœ‰æ˜ç¡®æŒ‡ç¤ºçš„æƒ…å†µä¸‹è¿›è¡Œé¢„æµ‹ã€å†³ç­–æˆ–åˆ†ç±»æ—¶ï¼Œæˆ‘ä»¬å°±åœ¨ä½¿ç”¨[[ML|æœºå™¨å­¦ä¹ ]]ã€‚

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæœ‰ç”¨çš„[[ML|æœºå™¨å­¦ä¹ ]]ç®—æ³•éœ€è¦å¤§é‡çš„è®¡ç®—èµ„æºï¼ˆ[[CPU|ä¸­å¤®å¤„ç†å™¨]]ï¼ˆ[[CPU]]ï¼Œ[[CPU|Central Processing Unit]]ï¼‰å‘¨æœŸå’Œ[[RAM|éšæœºå­˜å–å­˜å‚¨å™¨]]ï¼ˆ[[RAM]]ï¼Œ[[RAM|Random Access Memory]]ï¼‰ï¼‰ã€‚ç„¶è€Œï¼Œ[[TensorFlow Lite]]æœ€è¿‘å‘å¸ƒäº†ä¸€ä¸ªå®éªŒç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨å¤šä¸ªå¾®æ§åˆ¶å™¨ä¸Šè¿è¡Œã€‚å‡è®¾æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé€‚åˆèµ„æºæœ‰é™è®¾å¤‡çš„æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å°†åµŒå…¥å¼ç³»ç»Ÿè½¬å˜ä¸ºå¾®å‹[[ML|æœºå™¨å­¦ä¹ ]]ï¼ˆ[[TinyML]]ï¼‰è®¾å¤‡ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿé¢„æµ‹æ­£å¼¦å‡½æ•°è¾“å‡ºçš„ç¥ç»ç½‘ç»œã€‚ç„¶åæˆ‘ä»¬å°†æŠŠè¿™ä¸ªæ¨¡å‹è½¬æ¢ä¸º[[TensorFlow Lite]]ï¼ˆ[[TFLite]]ï¼‰æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨[[Netron]]è¿›è¡Œæ£€æŸ¥ã€‚

å¦‚æœæ‚¨æƒ³è§‚çœ‹è¿™äº›æ­¥éª¤çš„è§†é¢‘è¯´æ˜ï¼Œè¯·æŸ¥çœ‹è¿™ä¸ªYouTubeè§†é¢‘ï¼š

**æ¨¡å‹æè¿°**

æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªä¸‰å±‚å…¨è¿æ¥ç¥ç»ç½‘ç»œï¼Œè¯¥ç½‘ç»œå¯ä»¥é¢„æµ‹æ­£å¼¦å‡½æ•°çš„è¾“å‡ºã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å…¶ç”¨ä½œ[[å›å½’æ¨¡å‹]]ï¼ˆ[[Regression Model]]ï¼‰ã€‚ 

è¿™ä¸ªæƒ³æ³•æ˜¯è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œè¯¥æ¨¡å‹æ¥å—0åˆ°2Ï€ä¹‹é—´çš„å€¼ï¼Œç„¶åè¾“å‡º-1åˆ°1ä¹‹é—´çš„å€¼ã€‚å¦‚æœæˆ‘ä»¬å°†è¾“å…¥å€¼æ ‡è®°ä¸º$x$ï¼Œè¾“å‡ºå€¼æ ‡è®°ä¸º$y$ï¼Œé‚£ä¹ˆæ¨¡å‹åº”è¯¥èƒ½å¤Ÿé¢„æµ‹$y = \sin(x)$ã€‚

è¿™å¯èƒ½æ˜¯è®¡ç®—æ­£å¼¦æ³¢æœ€æ— æ•ˆç‡ã€æœ€è¿‚å›çš„æ–¹æ³•ä¹‹ä¸€ã€‚ç„¶è€Œï¼Œè¿™è®©æˆ‘ä»¬å¯ä»¥ç©ä¸€ä¸ªå¸¦æœ‰ä¸€äº›éçº¿æ€§çš„å¾®å°ç¥ç»ç½‘ç»œï¼Œå¹¶å°†å…¶åŠ è½½åˆ°å¾®æ§åˆ¶å™¨ä¸Šã€‚

[[TensorFlow]]åŒ…å«ä¸€ä¸ªè½¬æ¢å™¨ç±»ï¼Œè¯¥ç±»å…è®¸æˆ‘ä»¬å°†[[Keras]]æ¨¡å‹è½¬æ¢ä¸º[[TensorFlow Lite]]æ¨¡å‹ã€‚[[TensorFlow Lite]]æ¨¡å‹å­˜å‚¨ä¸º[[FlatBuffer]]ï¼Œè¿™å¯¹äºä¸€æ¬¡è¯»å–å¤§å—æ•°æ®éå¸¸æœ‰ç”¨ï¼ˆè€Œä¸æ˜¯å¿…é¡»å°†æ‰€æœ‰æ•°æ®åŠ è½½åˆ°[[RAM|éšæœºå­˜å–å­˜å‚¨å™¨]]ä¸­ï¼‰ã€‚

ä¸€æ—¦æˆ‘ä»¬åˆ›å»ºå¹¶è®­ç»ƒäº†æ¨¡å‹ï¼Œæˆ‘ä»¬å°†è¿è¡Œ[[TensorFlow Lite]]è½¬æ¢å™¨ä»¥åˆ›å»ºä¸€ä¸ªtfliteæ¨¡å‹ã€‚ç„¶åï¼Œæˆ‘ä»¬éœ€è¦å°†tfliteæ¨¡å‹å­˜å‚¨ä¸ºCå¸¸é‡æ•°ç»„ä¸­çš„ä¸€ç³»åˆ—å­—èŠ‚ï¼ˆåœ¨.cæˆ–.hæ–‡ä»¶ä¸­ï¼‰ã€‚è¿™å°†å…è®¸æˆ‘ä»¬åŠ è½½æ¨¡å‹å¹¶ä½¿ç”¨[[TensorFlow Lite for Microcontrollers]]åº“è¿›è¡Œæ¨ç†ã€‚

[[TensorFlow Lite]]æ”¯æŒä¸€äº›å¾®æ§åˆ¶å™¨æ¿ï¼Œæ‚¨å¯ä»¥åœ¨[æ­¤å¤„](https://www.tensorflow.org/lite/microcontrollers)æŸ¥çœ‹æ”¯æŒçš„åˆ—è¡¨ã€‚åœ¨æœ¬æ•™ç¨‹å‘å¸ƒæ—¶ï¼Œä»…æ”¯æŒ8ä¸ªå¾®æ§åˆ¶å™¨æ¿ã€‚è™½ç„¶æœ‰ä¸€ä¸ªé€‚ç”¨äº[[TensorFlow Lite]]çš„[[Arduino]]åº“ï¼Œä½†ä»…æ”¯æŒNano 33 BLE Senseã€‚å› æ­¤ï¼Œåœ¨æœ¬æ•™ç¨‹ç³»åˆ—çš„ç¬¬äºŒéƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Nano 33 BLE Senseã€‚

**[[Google Colab]]**

[[Google Colab]]æ˜¯ä¸€ä¸ªåŸºäºç½‘é¡µçš„[[Jupyter Notebook]]ç•Œé¢ï¼Œè¿è¡Œåœ¨[[Linux]]è™šæ‹Ÿæœºï¼ˆ[[VM|è™šæ‹Ÿæœº]]ï¼Œ[[VM|Virtual Machine]]ï¼‰ä¸Šã€‚å®ƒé¢„è£…äº†å¤§å¤šæ•°æµè¡Œçš„[[ML|æœºå™¨å­¦ä¹ ]]åŒ…ï¼Œå¹¶ä¸”æ˜¯å…è´¹çš„ï¼

æ³¨å†Œä¸€ä¸ª[[Google GMail]]è´¦æˆ·å¹¶å‰å¾€[https://colab.research.google.com/](https://colab.research.google.com/)ã€‚

è™½ç„¶æ‚¨å¯ä»¥åœ¨Colabä¸­è¯•éªŒå„ç§[[ML|æœºå™¨å­¦ä¹ ]]ç®—æ³•ï¼Œä½†æ‚¨åœ¨[[VM|è™šæ‹Ÿæœº]]èµ„æºå’Œæ—¶é—´ä¸Šå—åˆ°é™åˆ¶ã€‚å¦‚æœæ‚¨åœ¨90åˆ†é’Ÿå†…ä¸ä¸ç•Œé¢äº¤äº’ï¼Œæ‚¨å°†è¢«æ–­å¼€è¿æ¥ï¼Œå¹¶ä¸”æ¯12å°æ—¶ï¼Œè¿è¡Œæ—¶å°†é‡ç½®ã€‚

å¦‚æœæ‚¨å¸Œæœ›è¿›è¡Œæ›´é•¿æ—¶é—´çš„æ¨¡å‹è®­ç»ƒæˆ–éœ€è¦æ›´å¤šèµ„æºï¼Œæ‚¨å°†éœ€è¦æ”¯ä»˜ä¸“ä¸šç‰ˆè´¹ç”¨æˆ–è®¾ç½®è‡ªå·±çš„[[ML|æœºå™¨å­¦ä¹ ]]å¼€å‘æœºå™¨ï¼ˆæœ¬åœ°æˆ–æœåŠ¡å™¨ï¼‰ã€‚

è¯·æ³¨æ„ï¼Œä»¥ä¸‹å¤§å¤šæ•°ä»£ç ä¹Ÿå¯ä»¥åœ¨æœ¬åœ°çš„Pythonæˆ–[[Jupyter Notebook]]ä¸Šè¿è¡Œã€‚å¦‚æœæ‚¨å¸Œæœ›æœ¬åœ°è¿è¡Œ[[TensorFlow]]ï¼Œè¯·å‚è§[æœ¬æ•™ç¨‹](https://www.tensorflow.org/install)ã€‚

**æ¨¡å‹è®­ç»ƒ**

è¯·æ³¨æ„ï¼ŒåŸå§‹ä»£ç åŸºäº[[TensorFlow Lite]]çš„[[Pete Warden]]çš„å·¥ä½œã€‚æˆ‘å¯¹ç¤ºä¾‹è¿›è¡Œäº†ä¸€äº›è°ƒæ•´ï¼Œä½¿å…¶åœ¨è§†é¢‘ä¸­æ›´å¥½åœ°å·¥ä½œã€‚

å‰å¾€Colabå¹¶ç‚¹å‡»â€œNew Notebookâ€ã€‚ä¸ºè¯¥ç¬”è®°æœ¬å‘½åä¸€ä¸ªç‹¬ç‰¹çš„åç§°ï¼Œå¦‚â€œtflite-sinewave-training.ipynbâ€ã€‚

ä»£ç æœ€å¥½åœ¨Notebookå½¢å¼ä¸­æŸ¥çœ‹ï¼Œè¿™æ ·å¯ä»¥çœ‹åˆ°ç¤ºä¾‹è¾“å‡ºã€‚æˆ‘å°†åœ¨æœ¬æ•™ç¨‹ä¸­è®¨è®ºä¸€äº›é‡è¦çš„ä»£ç éƒ¨åˆ†ï¼Œä½†å¦‚æœæ‚¨æœ‰å…´è¶£è‡ªå·±è¿è¡ŒNotebookå¹¶å‰–æä»£ç ï¼Œè¯·å‚è§[æ­¤Gist](https://gist.github.com/ShawnHymel/79237fe6aee5a3653c497d879f746c0c)ã€‚

åœ¨é¡¶éƒ¨ï¼Œæˆ‘ä»¬é€‰æ‹©æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨çš„[[TensorFlow]]ç‰ˆæœ¬ã€‚è™½ç„¶æˆ‘æœ€åˆæŒ‡å®šçš„æ˜¯â€œ2.1â€ï¼Œä½†æ­¤é­”æœ¯å‘½ä»¤ä»…å¤„ç†ä¸»è¦ç‰ˆæœ¬ã€‚å› æ­¤ï¼Œå»ºè®®ä½¿ç”¨ï¼š

```python
%tensorflow_version 2.x
```

ä¹‹åï¼Œæˆ‘ä»¬å¯¼å…¥å¿…è¦çš„åŒ…å¹¶æ‰“å°å®ƒä»¬çš„ç‰ˆæœ¬ï¼Œè¿™åœ¨å„ç§è®ºå›ä¸Šå¯»æ±‚å¸®åŠ©æ—¶éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºäººä»¬é€šå¸¸ä¼šè¦æ±‚æŸ¥çœ‹æ‚¨ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚

ç„¶åï¼Œæˆ‘ä»¬æŒ‡å®šå„ç§è®¾ç½®ï¼ŒåŒ…æ‹¬æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨çš„æ ·æœ¬æ•°é‡ä»¥åŠæˆ‘ä»¬å¸Œæœ›ä¸ºéªŒè¯å’Œæµ‹è¯•é›†ä¿ç•™çš„æ ·æœ¬ç™¾åˆ†æ¯”ã€‚

ä»é‚£é‡Œï¼Œæˆ‘ä»¬ç”Ÿæˆç”¨äºè®­ç»ƒæ¨¡å‹çš„ä¸€ç»„éšæœº$x$å€¼ï¼š

```python
# Generate some random samples
np.random.seed(1234)
x_values = np.random.uniform(low=0, high=(2 * math.pi), size=nsamples)
plt.plot(x_values)
```

ç„¶åï¼Œæˆ‘ä»¬è®¡ç®—æ¯ä¸ªæ ·æœ¬çš„$\sin(x)$å€¼ï¼Œå¹¶åœ¨è¾“å‡ºä¸­æ·»åŠ ä¸€äº›éšæœºçš„é«˜æ–¯å™ªå£°ã€‚è¿™æœ‰åŠ©äºç¡®ä¿æ¨¡å‹æ˜¯ä¸€ä¸ªä¼°è®¡ï¼Œè€Œä¸æ˜¯æ­£å¼¦æ³¢çš„ç²¾ç¡®è¡¨ç¤ºã€‚

```python
# Create a noisy sinewave with these values
y_values = np.sin(x_values) + (0.1 * np.random.randn(x_values.shape[0]))
plt.plot(x_values, y_values, '.')
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ•°æ®åˆ†æˆè®­ç»ƒã€éªŒè¯å’Œæµ‹è¯•é›†ã€‚é€šå¸¸ï¼ŒæŸ¥çœ‹ï¼ˆæˆ–ç»˜åˆ¶ï¼‰è¾“å…¥æ•°æ®å’Œæ ‡ç­¾æ˜¯ä¸ªå¥½ä¸»æ„ã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œå› ä¸ºè¾“å…¥å’Œè¾“å‡ºè¿™é‡Œåªæœ‰ä¸€ä¸ªå€¼ï¼ˆä¸å¤šç»´æ•°ç»„ç›¸å¯¹ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°å¯è§†åŒ–è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å…³ç³»ï¼š

```python
# Split the dataset into training, validation, and test sets
val_split = int(val_ratio * nsamples)
test_split = int(val_split + (test_ratio * nsamples))
x_val, x_test, x_train = np.split(x_values, [val_split, test_split])
y_val, y_test, y_train = np.split(y_values, [val_split, test_split])
# Check that our splits add up correctly
assert(x_train.size + x_val.size + x_test.size) == nsamples
# Plot the data in each partition in different colors:
plt.plot(x_train, y_train, 'b.', label="Train")
plt.plot(x_test, y_test, 'r.', label="Test")
plt.plot(x_val, y_val, 'y.', label="Validate")
plt.legend()
plt.show()
```

è¿™åº”è¯¥ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„å›¾ï¼š

![æ•°æ®åˆ†å‰²å›¾](https://example.com/sine_wave_data_plot.png)

ç°åœ¨æˆ‘ä»¬æœ‰äº†å‡†å¤‡å¥½çš„æ•°æ®ï¼Œæ˜¯æ—¶å€™åˆ›å»ºæ¨¡å‹äº†ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªä¸‰å±‚å…¨è¿æ¥ï¼ˆå¯†é›†ï¼‰ç¥ç»ç½‘ç»œã€‚

```python
# Create a model
model = tf.keras.Sequential()
model.add(layers.Dense(16, activation='relu', input_shape=(1,)))
model.add(layers.Dense(16, activation='relu'))
model.add(layers.Dense(1))
```

ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è®¾ç½®çš„ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°ç¼–è¯‘å®ƒï¼Œæ¥ç€æ˜¯å®é™…çš„è®­ç»ƒè¿‡ç¨‹ï¼š

```python
# Add optimizer, loss function, and metrics to model and compile it
model.compile(optimizer='rmsprop', loss='mae', metrics=['mae'])

# Train model
history = model.fit(x_train,
                    y_train,
                    epochs=500,
                    batch_size=100,
                    validation_data=(x_val, y_val))
```

å‡ åˆ†é’Ÿåï¼Œæ‚¨åº”è¯¥æœ‰ä¸€ä¸ªå®Œå…¨è®­ç»ƒçš„æ¨¡å‹ã€‚æˆ‘ä»¬å¯ä»¥ç»˜åˆ¶æ¨¡å‹é¢„æµ‹çš„æ­£å¼¦å‡½æ•°ä¸æµ‹è¯•æ•°æ®çš„å¯¹æ¯”ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬æœ‰ä¸€ä¸ªè¿‘ä¼¼çš„æ­£å¼¦æ³¢ï¼š

```python
# Plot the training history
loss = history.history['loss']
val_loss = history.history['val_loss']
epochs = range(1

, len(loss) + 1)
plt.plot(epochs, loss, 'bo', label='Training loss')
plt.plot(epochs, val_loss, 'b', label='Validation loss')
plt.title('Training and validation loss')
plt.legend()
plt.show()
```

æ­¤ä»£ç çš„è¾“å‡ºåº”è¯¥ç»™æˆ‘ä»¬ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„å›¾ï¼š

![è®­ç»ƒå†å²å›¾](https://example.com/training_history_plot.png)

æ­£å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬çš„æ¨¡å‹åº”è¯¥ç»™æˆ‘ä»¬ä¸€ä¸ªè¿‘ä¼¼çš„æ­£å¼¦æ³¢ï¼Œå°½ç®¡å®ƒä¸å®Œå…¨æ­£ç¡®ã€‚

**è½¬æ¢ä¸º[[TensorFlow Lite]]æ¨¡å‹**

ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªè®­ç»ƒå¥½çš„[[Keras]]æ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è½¬æ¢ä¸ºæˆ‘ä»¬çš„å¾®æ§åˆ¶å™¨å¯ä»¥ä½¿ç”¨çš„ä¸œè¥¿ã€‚[[TensorFlow]]æœ‰ä¸€ä¸ªå†…ç½®çš„è½¬æ¢å™¨å‡½æ•°ï¼Œå®ƒå°†æ¨¡å‹ä¿å­˜ä¸º[[TensorFlow Lite]]æ¨¡å‹æ–‡ä»¶ï¼ˆå­˜å‚¨ä¸º[[FlatBuffer]]ï¼‰ï¼š

```python
# Convert Keras model to a tflite model
converter = tf.lite.TFLiteConverter.from_keras_model(model)
converter.optimizations = [tf.lite.Optimize.OPTIMIZE_FOR_SIZE]
tflite_model = converter.convert()
open(tflite_model_name + '.tflite', 'wb').write(tflite_model)
```

æœ‰ä¸€äº›é«˜çº§æŠ€æœ¯ï¼Œå¦‚é‡åŒ–ï¼Œæ‚¨å¯ä»¥åœ¨[æ­¤å¤„](https://www.tensorflow.org/lite/microcontrollers/build_convert)é˜…è¯»ç›¸å…³å†…å®¹ã€‚è¯·æ³¨æ„ï¼Œè®¸å¤šè¿™äº›æŠ€æœ¯æ¯å¤©éƒ½åœ¨å˜åŒ–ï¼Œå¯èƒ½éœ€è¦å¤§é‡å·¥ä½œæ‰èƒ½åœ¨å¾®æ§åˆ¶å™¨ä¸Šæ­£å¸¸è¿è¡Œã€‚

å°½ç®¡å¦‚æ­¤ï¼ŒåŸºæœ¬è½¬æ¢ä¼¼ä¹ç°åœ¨å¯ä»¥å·¥ä½œï¼Œå°½ç®¡å®ƒä¸æä¾›é‡åŒ–æ‰€æä¾›çš„ç›¸åŒçº§åˆ«çš„å†…å­˜èŠ‚çœã€‚

è¦åœ¨å¾®æ§åˆ¶å™¨ä¸Šè¿è¡Œtfliteæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ä¿å­˜ä¸º.cæˆ–.hæ–‡ä»¶ä¸­çš„å¸¸é‡å­—èŠ‚æ•°ç»„ã€‚

æ³¨æ„ï¼šä¸ºäº†è‰¯å¥½çš„Cä»£ç ï¼Œæ‚¨åº”è¯¥åœ¨.hæ–‡ä»¶ä¸­å£°æ˜å­—èŠ‚æ•°ç»„ï¼Œå¹¶åœ¨.cæ–‡ä»¶ä¸­å®šä¹‰ï¼ˆå®é™…å­—èŠ‚ï¼‰ã€‚å› ä¸ºæˆ‘æƒ³ä¿æŒè¿™ä¸ªç¤ºä¾‹ç®€å•ï¼Œæˆ‘å°†æŠŠæ‰€æœ‰å†…å®¹ä¿å­˜åœ¨ä¸€ä¸ª.hæ–‡ä»¶ä¸­ã€‚

æ­¤å‡½æ•°å¯ç”¨äºè¯»å–tfliteæ¨¡å‹æ–‡ä»¶ï¼Œå°†å…¶è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—èŠ‚ï¼Œå¹¶ç”ŸæˆåŒ…å«æˆ‘ä»¬æ¨¡å‹å’Œä»»ä½•å¿…è¦Cä»£ç çš„.hæ–‡ä»¶å­—ç¬¦ä¸²ï¼š

```python
# Function: Convert some hex value into an array for C programming
def hex_to_c_array(hex_data, var_name):
    c_str = ''
    # Create header guard
    c_str += '#ifndef ' + var_name.upper() + '_H\n'
    c_str += '#define ' + var_name.upper() + '_H\n\n'
    # Add array length at top of file
    c_str += '\nunsigned int ' + var_name + '_len = ' + str(len(hex_data)) + ';\n'
    # Declare C variable
    c_str += 'unsigned char ' + var_name + '[] = {'
    hex_array = []
    for i, val in enumerate(hex_data):
        # Construct string from hex
        hex_str = format(val, '#04x')
        # Add formatting so each line stays within 80 characters
        if (i + 1) < len(hex_data):
            hex_str += ','
        if (i + 1) % 12 == 0:
            hex_str += '\n '
        hex_array.append(hex_str)
    # Add closing brace
    c_str += '\n ' + format(' '.join(hex_array)) + '\n};\n\n'
    # Close out header guard
    c_str += '#endif //' + var_name.upper() + '_H'
    return c_str
```

æˆ‘ä»¬å°†è°ƒç”¨æ­¤å‡½æ•°å¹¶å°†.hæ–‡ä»¶ä¿å­˜åˆ°æˆ‘ä»¬çš„Colabè™šæ‹Ÿæœºï¼š

```python
# Write TFLite model to a C source (or header) file
with open(c_model_name + '.h', 'w') as file:
    file.write(hex_to_c_array(tflite_model, c_model_name))
```

**ä¿å­˜å’Œæ£€æŸ¥æ¨¡å‹æ–‡ä»¶**

ç‚¹å‡»Colabçª—å£å·¦ä¾§é¢æ¿ä¸­çš„â€œFilesâ€æŒ‰é’®ï¼Œä»¥æ£€æŸ¥è™šæ‹Ÿæœºä¸­çš„æ–‡ä»¶ã€‚æ‚¨åº”è¯¥çœ‹åˆ°sine_model.hã€‚å¦‚æœæ²¡æœ‰ï¼Œç‚¹å‡»â€œRefreshâ€æŒ‰é’®ã€‚å³é”®ç‚¹å‡»sine_model.hå¹¶é€‰æ‹©â€œDownloadâ€ã€‚

æ‚¨å¯ä»¥æ£€æŸ¥.hæ–‡ä»¶ï¼Œä»¥æŸ¥çœ‹å®ƒæ˜¯å¦åŒ…å«åˆæ³•çš„Cä»£ç ï¼ˆæ•°ç»„é•¿åº¦å’Œå¤§é‡åå…­è¿›åˆ¶å€¼çš„æ•°ç»„ï¼‰ã€‚

æ‚¨è¿˜å¯ä»¥ä¸‹è½½sine_model.tfliteæ¨¡å‹æ–‡ä»¶ã€‚å¦‚æœè¿™æ ·åšï¼Œæˆ‘å»ºè®®å®‰è£…[[Netron]]ä»¥å¯è§†åŒ–æ¨¡å‹ã€‚åªéœ€ç”¨Netronæ‰“å¼€.tfliteæ–‡ä»¶ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ¨¡å‹æè¿°å›¾ã€‚å¦‚æœç‚¹å‡»æŸä¸€å±‚ï¼Œæ‚¨å¯ä»¥è·å¾—è¯¥å±‚çš„ä¿¡æ¯ï¼Œå¦‚è¾“å…¥å’Œè¾“å‡ºç±»å‹ä»¥åŠå¼ é‡å¤§å°ã€‚

**è¿›ä¸€æ­¥å­¦ä¹ **

å¸Œæœ›è¿™æœ‰åŠ©äºæ‚¨å¼€å§‹ä½¿ç”¨Colabåˆ›å»ºä¸€ä¸ªç®€å•çš„[[TensorFlow Lite]]æ¨¡å‹ï¼Œå¹¶å°†å…¶éƒ¨ç½²åˆ°å¾®æ§åˆ¶å™¨ä¸Šï¼åœ¨ä¸‹ä¸€æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨[[Arduino]]ä¸Šè¿è¡Œ[[TensorFlow Lite]]æ¨ç†å¼•æ“ï¼Œå¹¶ä½¿ç”¨æˆ‘ä»¬çš„æ¨¡å‹æ¥é¢„æµ‹æ­£å¼¦å‡½æ•°å€¼ã€‚

è¯·å‚é˜…ä»¥ä¸‹æ–‡ç« ä»¥äº†è§£æ›´å¤šå…³äº[[TensorFlow Lite for Microcontrollers]]çš„å†…å®¹ï¼š

- [https://www.tensorflow.org/lite/microcontrollers](https://www.tensorflow.org/lite/microcontrollers)
- [https://www.tensorflow.org/lite/microcontrollers/get_started](https://www.tensorflow.org/lite/microcontrollers/get_started)
- [https://www.digikey.com/en/maker/projects/tensorflow-lite-for-microcontrollers-kit-quickstart/1b372b69e44f4d988b5363741a61882d](https://www.digikey.com/en/maker/projects/tensorflow-lite-for-microcontrollers-kit-quickstart/1b372b69e44f4d988b5363741a61882d)

**æ¨èé˜…è¯»**

- [TinyMLç®€ä»‹ç¬¬2éƒ¨åˆ†ï¼šå°†[[TensorFlow Lite]]æ¨¡å‹éƒ¨ç½²åˆ°[[Arduino]]](https://www.digikey.com/en/maker/projects/tensorflow-lite-for-microcontrollers-kit-quickstart/1b372b69e44f4d988b5363741a61882d)

æœ‰é—®é¢˜æˆ–æ„è§å—ï¼Ÿè¯·ç»§ç»­åœ¨[[TechForum]]ï¼Œ[[DigiKey]]çš„åœ¨çº¿ç¤¾åŒºå’ŒæŠ€æœ¯èµ„æºä¸Šäº¤æµã€‚

[è®¿é—®[[TechForum]]](https://forum.digikey.com/)



# è§†é¢‘æ•™ç¨‹æå–

# TinyMLä»‹ç» ç¬¬1éƒ¨åˆ† - ä½¿ç”¨TensorFlowä¸ºArduinoè®­ç»ƒç¥ç»ç½‘ç»œ | Digi-Key Electronics

2024å¹´07æœˆ14æ—¥ 17:54

## 00:10 - TinyMLç®€ä»‹
Tiny Machine Learningï¼Œå³TinyMLï¼Œæ˜¯AIé¢†åŸŸæ–°å…´çš„å¼€å‘æ–¹å‘ï¼Œæ—¨åœ¨å°†å„ç§æœºå™¨å­¦ä¹ ç®—æ³•åŠ è½½åˆ°å¾®æ§åˆ¶å™¨ä¸Šã€‚è¿™é¡¹æŠ€æœ¯ä¸ä»…æ–°é¢–ï¼Œè€Œä¸”éå¸¸é…·ã€‚ç”±äºå®ƒè¿˜å¾ˆæ–°ï¼Œè®¸å¤šåº“æ¯å¤©éƒ½åœ¨å˜åŒ–ã€‚å› æ­¤ï¼Œä»Šå¤©å±•ç¤ºçš„å†…å®¹å¯èƒ½åœ¨æ˜å¤©å°±æ— æ³•ä½¿ç”¨äº†ã€‚

### ä¸ºä»€ä¹ˆè¦å…³æ³¨TinyML
åœ¨ä¹‹å‰çš„è§†é¢‘ä¸­ï¼Œæˆ‘åˆ¶ä½œäº†ä¸€ä¸ªé€šè¿‡å”¤é†’è¯å…³é—­é“£åºŠçš„è®¾å¤‡ã€‚å½“æˆ‘è¯´â€œåœæ­¢â€æ—¶ï¼Œè¿™ä¸ªè®¾å¤‡éœ€è¦è¿è¡Œåœ¨[[Raspberry Pi|æ ‘è“æ´¾]]ä¸Šã€‚å¦‚æœæˆ‘ä»¬èƒ½åœ¨å¾®æ§åˆ¶å™¨ä¸Šè¿è¡Œè¿™ä¸ªæ¨¡å‹ï¼Œå®ƒå°†éœ€è¦æ›´å°‘çš„åŠŸç‡ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°å°†å…¶åµŒå…¥åˆ°é“£åºŠä¸­ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å®Œæ•´çš„å”¤é†’è¯æ¨¡å‹ã€‚

## 00:55 - ç¤ºä¾‹æ¨¡å‹ä»‹ç»
ä¸ºäº†è®©ä½ äº†è§£å¦‚ä½•è®­ç»ƒæ¨¡å‹å¹¶å°†å…¶éƒ¨ç½²åˆ°å¾®æ§åˆ¶å™¨ä¸Šï¼Œæˆ‘å°†å±•ç¤ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ¨¡å‹ï¼Œå½“è¾“å…¥ä¸€ä¸ªåœ¨0åˆ°2Ï€ä¹‹é—´çš„å€¼æ—¶ï¼Œè¾“å‡ºä¸€ä¸ªåœ¨-1åˆ°1ä¹‹é—´çš„å€¼ï¼Œè¿‘ä¼¼ä¸€ä¸ªæ­£å¼¦æ³¢ã€‚è¿™æ˜¯åˆ›å»ºæ­£å¼¦æ³¢çš„æœ€è’è°¬çš„æ–¹æ³•ä¹‹ä¸€ï¼Œä½†å®ƒå¯ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¶³å¤Ÿå°çš„ç¥ç»ç½‘ç»œï¼Œèƒ½å¤Ÿåœ¨å¾®æ§åˆ¶å™¨ä¸Šè¿è¡Œã€‚

æˆ‘ä»¬å°†ä½¿ç”¨[[TensorFlow|å¼ é‡æµ]]ï¼ˆ[[TensorFlow]]ï¼Œ[[TensorFlow|TensorFlow]]ï¼‰æ¥è®­ç»ƒæ¨¡å‹ã€‚è¿™æ¬¡æˆ‘ä¼šåœ¨[[Google Colab|è°·æ­Œåä½œå¹³å°]]ä¸Šå±•ç¤ºï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦å®‰è£…Pythonã€Anacondaã€TensorFlowã€NumPyç­‰å…¶ä»–åŒ…ã€‚å¦‚æœä¸æƒ³ï¼Œä½ å¯ä»¥è·³è¿‡è¿™äº›å®‰è£…æ­¥éª¤ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨åšçš„æ˜¯ä¸€ç§å›å½’ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»çŸ¥é“è¾“å‡ºåº”è¯¥æ˜¯ä¸€ä¸ªæ­£å¼¦æ³¢ï¼Œå› æ­¤ä¸éœ€è¦æ”¶é›†æ ·æœ¬é›†è¿›è¡Œè®­ç»ƒã€‚

## 01:49 - æ¨¡å‹è½¬æ¢ä¸éƒ¨ç½²
ä¸€æ—¦æˆ‘ä»¬æœ‰äº†æ¨¡å‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨TensorFlowå†…ç½®çš„è½¬æ¢å™¨å°†å…¶è½¬æ¢ä¸º[[TensorFlow Lite|Tensoræµè½»é‡ç‰ˆ]]ï¼ˆ[[TFLite]]ï¼Œ[[TensorFlow Lite|TensorFlow Lite]]ï¼‰æ¨¡å‹ã€‚è™½ç„¶ä¸€äº›åµŒå…¥å¼ç³»ç»Ÿå¯ä»¥ç›´æ¥è¯»å–è¯¥æ¨¡å‹æ–‡ä»¶ï¼Œä½†æˆ‘ä»¬ä¼šå°†å…¶è½¬æ¢ä¸ºä¿å­˜ä¸ºCå¤´æ–‡ä»¶çš„åŸå§‹å­—èŠ‚ã€‚ç„¶ååœ¨æˆ‘ä»¬çš„Arduinoè‰å›¾ä¸­åŒ…å«è¯¥å¤´æ–‡ä»¶ï¼Œå¹¶è¿è¡Œ[[TensorFlow Lite|Tensoræµè½»é‡ç‰ˆ]]æ¨ç†å¼•æ“ï¼Œä»¥è¿‘ä¼¼æ­£å¼¦æ³¢ã€‚

## 02:11 - ä½¿ç”¨Google Colab
å¦‚æœä½ å·²ç»åœ¨è®¡ç®—æœºä¸Šå®‰è£…äº†Pythonã€TensorFlowå’Œ[[Jupyter Notebook|Jupyterç¬”è®°æœ¬]]ï¼Œæ¬¢è¿ä½¿ç”¨å®ƒä»¬ã€‚ç„¶è€Œï¼Œåœ¨æ¥ä¸‹æ¥çš„å‡ é›†é‡Œï¼Œæˆ‘å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨[[Google Colab|è°·æ­Œåä½œå¹³å°]]ï¼Œè¿™æ˜¯ä¸€æ¬¾å¸¦æœ‰[[Jupyter Notebook|Jupyterç¬”è®°æœ¬]]çš„åœ¨çº¿ç¼–è¾‘å™¨ï¼Œå¹¶ä¸”å¯ä»¥å…è´¹ä½¿ç”¨ã€‚æ³¨æ„ï¼Œä½ éœ€è¦ä¸€ä¸ªGmailè´¦æˆ·æ‰èƒ½ä½¿ç”¨å®ƒã€‚å‰å¾€colab.research.google.comå¹¶ç™»å½•ä½ çš„Gmailè´¦æˆ·ã€‚

## 02:40 - Google Colabçš„ä½¿ç”¨é™åˆ¶
Google Colabæ¯90åˆ†é’Ÿæ–­å¼€ä¸€æ¬¡è¿æ¥ï¼Œå¦‚æœä½ æ²¡æœ‰ä¸å®ƒäº’åŠ¨çš„è¯ã€‚ä½ è¿˜å¯ä»¥åœ¨æ¯ä¸ªä¼šè¯ä¸­è·å¾—é•¿è¾¾12å°æ—¶çš„GPUæ”¯æŒã€‚è¿™äº›é™åˆ¶å…è®¸ä½ ç©å¼„æœºå™¨å­¦ä¹ ï¼Œä½†å¦‚æœéœ€è¦è®­ç»ƒæ›´å¤§çš„æ¨¡å‹ï¼Œä½ å¯èƒ½éœ€è¦æ”¯ä»˜Proç‰ˆæˆ–è‡ªè¡Œè®¾ç½®æœºå™¨å­¦ä¹ ç¯å¢ƒã€‚

## 03:07 - TensorFlowç‰ˆæœ¬é€‰æ‹©ä¸ç¯å¢ƒè®¾ç½®
åœ¨Colabä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é­”æœ¯å‡½æ•°`tensorflow_version`æ¥æŒ‡å®šæ‰€éœ€çš„TensorFlowç‰ˆæœ¬ã€‚æˆ‘å°†ä½¿ç”¨2.1ç‰ˆï¼Œè™½ç„¶è§£é‡Šå™¨åªå…è®¸é€‰æ‹©ä¸»è¦ç‰ˆæœ¬1æˆ–2ã€‚ç„¶åæˆ‘ä»¬å¯¼å…¥[[TensorFlow|å¼ é‡æµ]]ã€[[NumPy|æ•°å€¼Python]]ï¼ˆ[[NumPy]]ï¼Œ[[NumPy|NumPy]]ï¼‰ã€[[Matplotlib|ç»˜å›¾åº“]]ï¼ˆ[[Matplotlib]]ï¼Œ[[Matplotlib|Matplotlib]]ï¼‰ã€mathå’Œæ¥è‡ª[[Keras|å‡¯æ‹‰æ–¯]]ï¼ˆ[[Keras]]ï¼Œ[[Keras|Keras]]ï¼‰çš„layersã€‚å› ä¸ºTensorFlowä¸æ–­å˜åŒ–ï¼Œæˆ‘å–œæ¬¢æ‰“å°å‡ºæˆ‘æ‰€ä½¿ç”¨çš„Pythonå’Œå„ç§åŒ…çš„ç‰ˆæœ¬å·ï¼Œè¿™åœ¨éœ€è¦åœ¨è®ºå›ä¸Šå¯»æ±‚å¸®åŠ©æ—¶éå¸¸æœ‰ç”¨ã€‚

## 04:00 - æ•°æ®é›†ç”Ÿæˆ
æˆ‘ä»¬å°†ç”Ÿæˆ1000ä¸ªæ ·æœ¬ï¼Œå¹¶å°†20%çš„æ ·æœ¬ç”¨äºéªŒè¯ï¼Œ20%çš„æ ·æœ¬ç”¨äºæµ‹è¯•ã€‚æœ€åï¼Œæˆ‘ä»¬å®šä¹‰æˆ‘ä»¬çš„TF Liteæ¨¡å‹å’Œæ¨¡å‹åç§°ï¼Œå®ƒä»¬å°†ç”¨äºæ–‡ä»¶å‘½åã€‚

æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªéšæœºç§å­ï¼Œä»¥ä¾¿åœ¨0åˆ°2Ï€ä¹‹é—´å‡åŒ€åˆ†å¸ƒç”Ÿæˆä¸€äº›Xå€¼ï¼Œå¹¶ç»˜åˆ¶è¿™äº›Xå€¼ä»¥ç¡®ä¿å®ƒä»¬ç¬¦åˆæ ‡å‡†ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›Xå€¼è®¡ç®—æ­£å¼¦å€¼ã€‚ä¸ºäº†å¢åŠ è¶£å‘³æ€§ï¼Œæˆ‘ä»¬ä¼šåœ¨Yå€¼ä¸Šæ·»åŠ ä¸€äº›é«˜æ–¯å™ªå£°ï¼Œè¿™å°†ä½¿æ¨¡å‹çš„é¢„æµ‹æ›´åŠ ä¸ç²¾ç¡®ï¼Œå› ä¸ºæ¨¡å‹éœ€è¦åŸºäºè¿™ä¸ªå˜ˆæ‚çš„ä¿¡å·ä¼°è®¡å€¼ã€‚

## 04:29 - æ•°æ®é›†åˆ’åˆ†
ç„¶åæˆ‘ä»¬å°†æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†ã€‚è®­ç»ƒé›†ç”¨äºæ›´æ–°æ¨¡å‹å‚æ•°ã€‚éªŒè¯é›†åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ç”¨äºè¯„ä¼°æ¨¡å‹åœ¨æœªè§è¿‡çš„æ•°æ®ä¸Šçš„è¡¨ç°ã€‚æµ‹è¯•é›†å°†åœ¨æœ€åç”¨äºæµ‹è¯•ã€‚

## 04:47 - æ•°æ®é›†æ£€æŸ¥
ç¡®ä¿è®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†çš„æ€»å’Œç­‰äºæ•°æ®é›†ä¸­çš„æ ·æœ¬æ•°ï¼Œä¸è¦é—æ¼ä»»ä½•æ•°æ®æˆ–åœ¨é›†åˆä¹‹é—´æœ‰ä»»ä½•é‡å ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä¸€èµ·ç»˜åˆ¶è¿™äº›é›†åˆã€‚å¤§å¤šæ•°ç‚¹åº”è¯¥å±äºè®­ç»ƒé›†ï¼ŒéªŒè¯é›†å’Œæµ‹è¯•é›†å„å 20%çš„ç‚¹ã€‚æ¯ä¸ªé›†åˆåº”è¯¥æ²¿æ•´ä¸ªæ­£å¼¦æ³¢åˆ†å¸ƒï¼Œè€Œä¸ä»…ä»…é›†ä¸­åœ¨ä¸€ä¸ªåŒºåŸŸã€‚

## 05:12 - æ¨¡å‹æ¶æ„
æˆ‘ä»¬å°†ä½¿ç”¨ä¸¤ä¸ª16èŠ‚ç‚¹çš„å…¨è¿æ¥å±‚æˆ–å¯†é›†å±‚ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªä»…æœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„æœ€ç»ˆå±‚ã€‚è¾“å…¥æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œåœ¨è®¸å¤šæœºå™¨å­¦ä¹ åº”ç”¨ä¸­ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªåŒ…å«è®¸å¤šæ•°å­—çš„æ•°ç»„ï¼Œä½†åœ¨è¿™é‡Œæˆ‘ä»¬åªç»™å‡ºä¸€ä¸ªåœ¨0åˆ°2Ï€ä¹‹é—´çš„æ•°å­—ã€‚æ¨¡å‹å°†æ‰§è¡Œå¿…è¦çš„è®¡ç®—ï¼Œä»¥é¢„æµ‹ä¸€ä¸ªä¸è¾“å…¥å€¼çš„æ­£å¼¦å¯¹åº”çš„å€¼ï¼Œå¸Œæœ›è¾“å‡ºä»‹äº-1åˆ°1ä¹‹é—´ã€‚

## 05:46 - è®¡ç®—é‡
å¦‚ä½ æ‰€è§ï¼Œæ¯ä¸€æ­¥æˆ‘ä»¬éƒ½éœ€è¦è¿›è¡Œå¤§é‡çš„è®¡ç®—ã€‚è¿™ä¸ªæ¨¡å‹ç›¸å¯¹è¾ƒå°ï¼Œä½†å¯¹äºå¾®æ§åˆ¶å™¨æ¥è¯´ï¼Œåœ¨çŸ­æ—¶é—´å†…å¤„ç†æ‰€æœ‰è¿™äº›ä¹˜æ³•ä»ç„¶å¾ˆå›°éš¾ï¼Œä½†å¯¹äºæˆ‘ä»¬çš„æ¼”ç¤ºæ¥è¯´ï¼Œåº”è¯¥è¶³å¤Ÿäº†ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª100Hzçš„æ­£å¼¦æ³¢ã€‚

## 06:03 - ä½¿ç”¨Kerasåˆ›å»ºæ¨¡å‹
åœ¨Colabä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Kerasåˆ›å»ºæˆ‘ä»¬åˆšåˆšæè¿°çš„æ¨¡å‹ã€‚æˆ‘ä»¬å‘Šè¯‰æ¨¡å‹è¾“å…¥å¼ é‡çš„å½¢çŠ¶ä»…ä¸ºä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”é™¤æœ€åä¸€ä¸ªèŠ‚ç‚¹å¤–ï¼Œæ‰€æœ‰èŠ‚ç‚¹çš„æ¿€æ´»å‡½æ•°éƒ½ä¸º[[ReLU|ä¿®æ­£çº¿æ€§å•å…ƒ]]ï¼ˆ[[ReLU]]ï¼Œ[[Rectified Linear Unit]]ï¼‰ã€‚

æˆ‘ä»¬å°†ä¼˜åŒ–å™¨è®¾ç½®ä¸ºRMSpropï¼ŒæŸå¤±å‡½æ•°è®¾ç½®ä¸ºç»å¯¹è¯¯å·®ã€‚ä½ å¯ä»¥ä½¿ç”¨å…¶ä»–ä¼˜åŒ–å™¨ï¼Œå¦‚Adamï¼Œä»¥åŠå…¶ä»–æŸå¤±å‡½æ•°ï¼Œå¦‚å‡æ–¹è¯¯å·®ã€‚è¿™äº›å¯¹å°æ¨¡å‹çš„è®­ç»ƒå½±å“ä¸å¤§ã€‚

## 06:31 - æ¨¡å‹è®­ç»ƒ
ç„¶åæˆ‘ä»¬ä½¿ç”¨fitå‡½æ•°è¿›è¡Œè®­ç»ƒï¼Œéœ€æä¾›å­˜å‚¨åœ¨X_trainä¸­çš„è®­ç»ƒè¾“å…¥æ•°æ®å’Œå­˜å‚¨åœ¨Y_trainä¸­çš„è®­ç»ƒè¾“å…¥æ ‡ç­¾ã€‚æˆ‘ä»¬å°†è®­ç»ƒ500ä¸ªepochï¼Œæ‰¹é‡å¤§å°ä¸º100ï¼Œå¹¶åœ¨æ¯ä¸ªepochåæµ‹è¯•éªŒè¯é›†ã€‚è®­ç»ƒåªéœ€å‡ åˆ†é’Ÿã€‚è®­ç»ƒå®Œæˆåï¼Œç»˜åˆ¶è®­ç»ƒå†å²å›¾è¡¨æ— è®ºæ˜¯æŸå¤±è¿˜æ˜¯å‡†ç¡®åº¦å€¼éƒ½æ˜¯ä¸ªå¥½ä¸»æ„ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è®­ç»ƒå’ŒéªŒè¯æŸå¤±éƒ½æ”¶æ•›åˆ°çº¦0.1ä»¥ä¸‹ï¼Œè¿™æ„å‘³ç€å®ƒåº”è¯¥å¯ä»¥å‡†ç¡®é¢„æµ‹æˆ‘ä»¬çš„æ­£å¼¦æ³¢ã€‚éªŒè¯æ›²çº¿ä¸è®­ç»ƒæ›²çº¿å¯¹é½ï¼Œæ„å‘³ç€æˆ‘ä»¬ä¸å¤ªå¯èƒ½å‡ºç°æ¨¡å‹è¿‡æ‹Ÿåˆçš„æƒ…å†µã€‚

## 07:12 - æµ‹è¯•æ¨¡å‹
æœ€åï¼Œæˆ‘ä»¬è¦çœ‹çœ‹æ¨¡å‹åœ¨æœªè§è¿‡çš„æ•°æ®ä¸Šçš„è¡¨ç°ã€‚è¿™æ˜¯æˆ‘ä»¬æ‹¿å‡ºä¹‹å‰ä¿ç•™çš„æµ‹è¯•é›†çš„æ—¶å€™ã€‚æˆ‘ä»¬å°†åŸºäºæµ‹è¯•é›†ä¸­çš„è¾“å…¥å€¼åˆ›å»ºä¸€ç»„é¢„æµ‹ã€‚æˆ‘ä»¬ä½¿ç”¨è“è‰²ç‚¹ç»˜åˆ¶æ­£å¼¦å‡½æ•°çš„å®é™…è¾“å‡ºï¼ˆåŠ ä¸Šä¸€äº›å™ªå£°ï¼‰ï¼Œä½¿ç”¨çº¢è‰²ç‚¹ç»˜åˆ¶é¢„æµ‹å€¼ã€‚æ­£å¦‚ä½ æ‰€è§ï¼Œæ¨¡å‹åˆ›å»ºäº†ä¸€ä¸ªè¿‘ä¼¼çš„æ­£å¼¦æ³¢ï¼Œä½†ä¼¼ä¹æ²¡æœ‰å®Œå…¨è·Ÿéšæ›²çº¿ã€‚æ²¡å…³ç³»ï¼Œå¯¹äºæˆ‘ä»¬çš„æ¼”ç¤ºæ¥è¯´å·²ç»è¶³å¤Ÿäº†ã€‚

## 07:40 - è½¬æ¢ä¸ºTensorFlow Liteæ¨¡å‹
ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªè¡¨ç°è¶³å¤Ÿå¥½çš„æ¨¡å‹ï¼Œæˆ‘ä»¬æƒ³å°†å…¶è½¬æ¢ä¸º[[TensorFlow Lite|Tensoræµè½»é‡ç‰ˆ]]æ¨¡å‹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å†…ç½®çš„TF Liteè½¬æ¢å™¨æ¥å®Œæˆæ­¤æ“ä½œã€‚ç”±äºå¤§å¤šæ•°æœ‰ç”¨çš„ç¥ç»ç½‘ç»œåœ¨æ¨ç†æ—¶éœ€è¦å¤§é‡å†…å­˜ï¼Œå› æ­¤ä¼˜åŒ–æ¨¡å‹å¤§å°æ˜¯ä¸ªå¥½ä¸»æ„ã€‚æˆ‘ä»¬è°ƒç”¨convertå‡½æ•°ï¼Œç„¶åå°†ç»“æœæ¨¡å‹ä¿å­˜ä¸º.TF Liteæ–‡ä»¶ã€‚æ³¨æ„ï¼ŒColabåœ¨å…¶è‡ªå·±çš„è™šæ‹ŸLinuxæœºå™¨ä¸­è¿è¡Œã€‚å¦‚æœæˆ‘ä»¬ç‚¹å‡»æ–‡ä»¶å¤¹å›¾æ ‡ï¼Œå¯ä»¥çœ‹åˆ°è™šæ‹Ÿæœºä¸­çš„ç›®å½•åˆ—è¡¨ã€‚é»˜è®¤å·¥ä½œç›®å½•ä¸ºcontentç›®å½•ï¼Œå› æ­¤å¦‚æœè¿›å…¥contentç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åˆšåˆšåˆ›å»ºçš„TF Liteæ–‡ä»¶ï¼Œå³é”®ç‚¹å‡»å¹¶ä¸‹è½½ã€‚

## 08:21 - æ¨¡å‹æ£€æŸ¥å·¥å…·
ä¸€ä¸ªå¾ˆæ£’çš„æ¨¡å‹æ£€æŸ¥å·¥å…·æ˜¯Netronï¼Œä½ å¯ä»¥ä»å…¶GitHub Readmeé¡µé¢ä¸‹è½½å®‰è£…ç¨‹åºã€‚å®‰è£…åï¼Œåªéœ€è¿è¡Œç¨‹åºå¹¶æ‰“å¼€æ¨¡å‹æ–‡ä»¶ã€‚æˆ‘é€‰æ‹©æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„TF Liteæ–‡ä»¶ã€‚ä½ å¯ä»¥ç‚¹å‡»å„ä¸ªå±‚æ¥è·å–å®ƒä»¬çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥çœ‹åˆ°è¾“å…¥éœ€è¦ä¸€ä¸ªä»…åŒ…å«ä¸€ä¸ªå…ƒç´ çš„æµ®ç‚¹æ•°ç»„ã€‚ä¸¤ä¸ª16èŠ‚ç‚¹å±‚ä½¿ç”¨æµ®ç‚¹æ•°ï¼Œæ¨¡å‹è¾“å‡ºå¦ä¸€ä¸ªä»…åŒ…å«ä¸€ä¸ªå…ƒç´ çš„æµ®

ç‚¹æ•°ç»„ã€‚

## 08:48 - è½¬æ¢ä¸ºCä»£ç 
ä¸€æ—¦æˆ‘ä»¬ç¡®è®¤æ¨¡å‹çœ‹èµ·æ¥ä¸é”™ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è½¬æ¢ä¸ºCä»£ç ã€‚åœ¨Linuxä¸­ï¼Œæœ‰ä¸€ä¸ªå«xxdçš„å·¥å…·å¯ä»¥è¯»å–TF Liteæ–‡ä»¶ï¼ˆåªæ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼‰ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå¦ä¸€ä¸ªæ–‡ä»¶ä¸­çš„Cæ•°ç»„ã€‚è™½ç„¶è¿™åœ¨Colabä¸­å¯è¡Œï¼Œä½†å¦‚æœä½ åœ¨Windowsä¸Šæœ¬åœ°è¿è¡Œï¼Œxxdä¸ä¼šå¸®åŠ©ä½ ã€‚å› æ­¤ï¼Œæˆ‘å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨hex2Carrayå‡½æ•°å°†ä¸€ç»„åŸå§‹å­—èŠ‚è½¬æ¢ä¸ºCæ•°ç»„ã€‚æˆ‘ä»¬åªéœ€åœ¨Pythonä¸­ä¼ é€’ä¸€ä¸ªåŸå§‹å­—èŠ‚æ•°ç»„ä»¥åŠå˜é‡åï¼Œè¯¥å‡½æ•°å°†åˆ›å»ºä¸€ä¸ªæˆ‘ä»¬å¯ä»¥å†™å…¥æ–‡ä»¶çš„å­—ç¬¦ä¸²ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬è®©Pythonä¸ºæˆ‘ä»¬ç¼–å†™Cä»£ç ã€‚

## 09:23 - åˆ›å»ºCå¤´æ–‡ä»¶
æˆ‘ä»¬é€šå¸¸åº”è¯¥åœ¨ä¸€ä¸ª.cæ–‡ä»¶ä¸­ä¿æŒè¿™ä¸ªå¸¸é‡æ•°ç»„çš„å®šä¹‰ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªå•ç‹¬çš„.hæ–‡ä»¶è¿›è¡Œå£°æ˜ã€‚ä½†æˆ‘å¾ˆæ‡’ï¼Œè¿™åœ¨Arduinoä¸­éœ€è¦æ›´å¤šå·¥ä½œã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªåˆ›å»ºä¸€ä¸ª.hæ–‡ä»¶ï¼Œå¹¶å°†è¿™ä¸ªå¸¸é‡æ•°ç»„æ”¾åœ¨é‡Œé¢ã€‚æˆ‘ä»¬å°†.hæ–‡ä»¶ä¿å­˜åœ¨Colabè™šæ‹Ÿæœºä¸Šã€‚å¦‚æœç‚¹å‡»åˆ·æ–°ï¼Œè¯¥æ–‡ä»¶åº”è¯¥ä¼šå‡ºç°ã€‚å³é”®ç‚¹å‡»æ–‡ä»¶å¹¶ä¸‹è½½ï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰å¯¹TF Liteæ–‡ä»¶åšçš„é‚£æ ·ã€‚å¦‚æœåœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå®ƒåº”è¯¥çœ‹èµ·æ¥åƒä¸€ä¸ªæ ‡å‡†çš„Cå¤´æ–‡ä»¶ï¼Œé¡¶éƒ¨å®šä¹‰äº†æ¨¡å‹é•¿åº¦ï¼Œç„¶åæ˜¯ä¸€ä¸ªå·¨å¤§çš„å­—èŠ‚æ•°ç»„ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€é›†å°†è¿™ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°æˆ‘ä»¬çš„åµŒå…¥å¼é¡¹ç›®ä¸­ã€‚

## 10:00 - è¿è¡Œç¯å¢ƒè¦æ±‚
è™½ç„¶æœ‰ä¸€äº›æœºå™¨å­¦ä¹ ç®—æ³•å¯ä»¥åœ¨8ä½å¾®æ§åˆ¶å™¨ä¸Šè¿è¡Œï¼Œä½†è¿è¡ŒTensorFlow Liteçš„æœ€ä½è¦æ±‚ä¼¼ä¹æ˜¯Arm Cortex M3æˆ–M4ã€‚æˆ‘å‘ç°å¦‚æœRAMå°‘äº100KBï¼Œå‡ ä¹æ— æ³•åšä»»ä½•æœ‰ç”¨çš„äº‹æƒ…ã€‚æ­¤å¤–ï¼ŒTensorFlow Liteä»…æ”¯æŒå°‘æ•°å‡ æ¬¾å¾®æ§åˆ¶å™¨ã€‚

## 10:20 - Arduinoæ¼”ç¤º
åœ¨è§†é¢‘åˆ¶ä½œæ—¶ï¼Œä¸‹ä¸€é›†æˆ‘ä»¬å°†ä½¿ç”¨Arduinoï¼Œå› ä¸ºè¿™æ˜¯è®¾ç½®TensorFlow Liteå·¥å…·é“¾çš„æœ€ç®€å•æ–¹æ³•ã€‚ç›®å‰ï¼Œä»…æ”¯æŒ[[Arduino Nano 33 BLE Sense]]ï¼Œå› ä¸ºå®ƒåŸºäºNRF 5240èŠ¯ç‰‡ã€‚å¦‚æœä½ æƒ³å°è¯•ä»£ç ï¼Œå¯ä»¥åœ¨æè¿°ä¸­æ‰¾åˆ°é“¾æ¥ã€‚ä¸‹æ¬¡ï¼Œæˆ‘ä»¬å°†æ¨¡å‹åŠ è½½åˆ°Arduinoæ¿ä¸Šï¼Œå¹¶ä½¿ç”¨TensorFlow Liteæ¨ç†å¼•æ“å®æ—¶é¢„æµ‹æ­£å¼¦å€¼ã€‚å¦‚æœä½ æƒ³çœ‹åˆ°æ›´å¤šç±»ä¼¼çš„è§†é¢‘ï¼Œè¯·è®¢é˜…å¹¶ç¥ä½ ç¼–ç¨‹æ„‰å¿«ã€‚